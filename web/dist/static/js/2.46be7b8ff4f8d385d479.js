webpackJsonp([2],{C2EO:function(e,s){},"v7+i":function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=a("vB2q"),i={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("el-row",{staticClass:"show-wrap"},[t("el-col",{staticClass:"model-left-wrap",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[t("p",{staticClass:"model-inout-tittle"},[e._v(e._s(e.$t("message.input_image")))]),e._v(" "),t("vue-viewer",{directives:[{name:"show",rawName:"v-show",value:""!=e.imageUrl,expression:"imageUrl != ''"}],staticClass:"source-image",attrs:{thumb:e.imageUrl,full:e.imageUrl}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:""==e.imageUrl,expression:"imageUrl == ''"}],staticClass:"input-wrap",attrs:{id:"drop-area"},on:{click:function(s){return e.moveClick()}}},[t("img",{attrs:{src:a("kTpr"),alt:""}}),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:0==e.isLoading,expression:"isLoading == false"}],staticClass:"input-help"},[e._v("\n          "+e._s(e.$t("message.drop_image"))+"\n        ")]),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:0==e.isLoading,expression:"isLoading == false"}],staticClass:"input-help"},[e._v("\n          "+e._s(e.$t("message.or"))+"\n        ")]),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:0==e.isLoading,expression:"isLoading == false"}],staticClass:"input-help"},[e._v("\n          "+e._s(e.$t("message.click_upload"))+"\n        ")]),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]},[e._v("uploading......")]),e._v(" "),t("input",{directives:[{name:"show",rawName:"v-show",value:0,expression:"0"}],ref:"filebutton",attrs:{type:"file"},on:{change:function(s){return e.fileChange("filebutton","imageUrl","isLoading")}}})]),e._v(" "),t("ShowArea",{staticClass:"centered lr-padding",attrs:{showAreaData:{images:e.modelData.detialData.show_images,bindName:"imageUrl"}}})],1),e._v(" "),t("el-col",{staticClass:"model-right-wrap",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[t("p",{staticClass:"model-inout-tittle"},[e._v(e._s(e.$t("message.result")))]),e._v(" "),t("div",[t("LoadingAnimationVue",{directives:[{name:"show",rawName:"v-show",value:e.isLoading2,expression:"isLoading2"}]}),e._v(" "),e.falseShow?t("p",[e._v("False！")]):e._e(),e._v(" "),e._l(e.modelResult,function(s,a){return t("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.modelResult,expression:"modelResult != ''"}],key:a},[t("div",{staticClass:"result-item-percentage"},[t("div",{staticClass:"item-bar",style:"width:"+90*Number(String(s.split(" ").slice(-1)))+"%"}),e._v(" "),t("p",[e._v("\n              "+e._s(String(Number(s.split(" ").slice(-1))).slice(0,4))+"\n            ")])]),e._v(" "),t("p",{staticClass:"result-item-type"},[e._v("\n            "+e._s(String(s.split(" ").slice(0,-1).join(" ")))+"\n          ")])])}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.modelResult,expression:"modelResult != ''"}],staticClass:"text-res"},[t("p",[e._v("\n            "+e._s(e.modelResult)+"\n          ")])])],2)])],1),e._v(" "),"{}"!=JSON.stringify(e.modelData.args)&&void 0!==e.modelData.args?t("el-row",{staticClass:"arg-background",attrs:{gutter:10}},e._l(e.modelData.args,function(s,a){return t("el-col",{key:a,attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[t("div",{staticClass:"arg-wrap"},[t("p",[e._v(e._s(a)+":")]),e._v(" "),"select"==s.type?t("el-select",{attrs:{placeholder:"请选择"},model:{value:s.default,callback:function(a){e.$set(s,"default",a)},expression:"arg_data.default"}},e._l(s.values,function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})}),1):e._e(),e._v(" "),"int"==s.type?t("el-input-number",{attrs:{precision:0,step:1,min:Math.min.apply(null,s.values),max:Math.max.apply(null,s.values)},model:{value:s.default,callback:function(a){e.$set(s,"default",a)},expression:"arg_data.default"}}):e._e(),e._v(" "),"float"==s.type?t("el-input-number",{attrs:{precision:2,step:.1,min:Math.min.apply(null,s.values),max:Math.max.apply(null,s.values)},model:{value:s.default,callback:function(a){e.$set(s,"default",a)},expression:"arg_data.default"}}):e._e()],1)])}),1):e._e(),e._v(" "),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{xs:12,sm:6,md:6,lg:6,xl:6}},[t("a",{staticClass:"clear upload-btn",attrs:{href:"javascript:void(0);"},on:{click:function(s){e.imageClear(e.clearStrs=["imageUrl","modelResult"],e.clearRefNames=["filebutton"],e.clearLoadingTokens=["isLoading","isLoading2"]),e.stopAxios()}}},[e._v(e._s(e.$t("message.clear")))])]),e._v(" "),t("el-col",{attrs:{xs:12,sm:6,md:6,lg:6,xl:6}},[t("a",{staticClass:"submit upload-btn",class:{"submit-forbidden":1==e.isLoading2},attrs:{href:"javascript:void(0);"},on:{click:function(s){return e.submit()}}},[e._v(e._s(e.$t("message.submit")))])])],1)],1)},staticRenderFns:[]};var n=function(e){a("C2EO")},o=a("VU/8")(t.a,i,!1,n,null,null);s.default=o.exports},vB2q:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__=__webpack_require__("pFYg"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__),__WEBPACK_IMPORTED_MODULE_1__assets_config_json__=__webpack_require__("2LA7"),__WEBPACK_IMPORTED_MODULE_1__assets_config_json___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__assets_config_json__),__WEBPACK_IMPORTED_MODULE_2__components_modelComponents_subComponents_ShowArea_vue__=__webpack_require__("5SbQ"),__WEBPACK_IMPORTED_MODULE_3__components_modelComponents_subComponents_LoadingAnimation_vue__=__webpack_require__("Yya3");__webpack_exports__.a={name:"classification",props:["modelData"],components:{ShowArea:__WEBPACK_IMPORTED_MODULE_2__components_modelComponents_subComponents_ShowArea_vue__.a,LoadingAnimationVue:__WEBPACK_IMPORTED_MODULE_3__components_modelComponents_subComponents_LoadingAnimation_vue__.a},data:function(){return{baseUrl:__WEBPACK_IMPORTED_MODULE_1__assets_config_json___default.a.base_url,imageUrl:"",isLoading:!1,isLoading2:!1,modelResult:"",falseShow:!1}},methods:{getType:function(e){return void 0===e?"undefined":__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default()(e)},moveClick:function(){var e=this;this.$nextTick(function(){e.$refs.filebutton.dispatchEvent(new MouseEvent("click"))})},stopAxios:function(){void 0!=this.source&&this.source.cancel("Operation canceled by the user.")},submit:function submit(){var _this2=this;if(""==this.imageUrl)this.$message({message:"请先上传图片！",type:"warning"});else{this.falseShow=!1,this.isLoading2=!0,this.modelResult="";var post_data={local_image_url:this.imageUrl.split("=")[1],conda_env:this.modelData.condaEnv,args:{},classname:this.modelData.modelType,demoname:this.modelData.modelId};for(var arg_name in this.modelData.args)post_data.args[arg_name]=this.modelData.args[arg_name].default;console.log(post_data),this.CancelToken=this.$axios.CancelToken,this.source=this.CancelToken.source(),this.$axios.post(this.baseUrl+"submit",post_data,{cancelToken:this.source.token}).then(function(res){_this2.modelResult=eval(res.data),0==_this2.modelResult&&(_this2.falseShow=!0),console.log("res=>",res),_this2.isLoading2=!1}).catch(function(e){_this2.isLoading2=!1,_this2.$message({message:e,type:"error"})})}},onDrop:function(e){(window.event||e).preventDefault(),this.$refs.filebutton.files=e.dataTransfer.files,this.fileChange(),console.log(this.$refs.filebutton.files),console.log(e.dataTransfer.files[0])}},mounted:function(){var e=this;setTimeout(function(){var s=e,a=document.getElementById("drop-area");a.ondragenter=a.ondragover=a.ondragleave=function(){return!1},a.addEventListener("drop",s.onDrop)},0);var s=this;this.$eventBus.$on("addClick",function(e){s.moveClick()}),this.$eventBus.$on("addShowImage",function(e){s[e.bindName]=e.showImageUrl})},beforedestroy:function(){eventBus.$off("eventName")}}}});
//# sourceMappingURL=2.46be7b8ff4f8d385d479.js.map